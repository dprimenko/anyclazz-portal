---
import './styles.css'
import { AnyclazzAuthRepository } from "../../infrastructure/AnyclazzAuthRepository"
import { getSession } from 'auth-astro/server';
import { LoggedUserClient } from './LoggedUserClient';

const loggedUser = new AnyclazzAuthRepository();
const user = await loggedUser.getCurrentUser(await getSession(Astro.request));
---

{user && (
    <LoggedUserClient 
        user={user} 
        client:load
    />
)}